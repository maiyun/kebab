[**Documents for @maiyunnet/kebab**](../../../index.md)

***

[Documents for @maiyunnet/kebab](../../../index.md) / [lib/s3](../index.md) / S3

# Class: S3

Defined in: [lib/s3.ts:43](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L43)

## Constructors

### Constructor

> **new S3**(`ctr`, `opt`): `S3`

Defined in: [lib/s3.ts:52](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L52)

#### Parameters

##### ctr

[`Ctr`](../../../sys/ctr/classes/Ctr.md)

##### opt

[`IOptions`](../interfaces/IOptions.md)

#### Returns

`S3`

## Methods

### deleteObject()

> **deleteObject**(`key`, `bucket?`): `Promise`\<`boolean`\>

Defined in: [lib/s3.ts:169](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L169)

删除对象

#### Parameters

##### key

`string`

对象路径

##### bucket?

`string`

bucket 名

#### Returns

`Promise`\<`boolean`\>

***

### deleteObjects()

> **deleteObjects**(`keys`, `bucket?`): `Promise`\<`boolean`\>

Defined in: [lib/s3.ts:189](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L189)

批量删除对象

#### Parameters

##### keys

`string`[]

批量对象路径

##### bucket?

`string`

bucket 名

#### Returns

`Promise`\<`boolean`\>

***

### destroy()

> **destroy**(): `void`

Defined in: [lib/s3.ts:231](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L231)

销毁连接，释放资源
一般会自动垃圾回收，但高频接口也可主动调用

#### Returns

`void`

***

### getObject()

> **getObject**(`key`, `bucket?`): `Promise`\<`false` \| `Readable` & `SdkStreamMixin` \| `Blob` & `SdkStreamMixin` \| `ReadableStream`\<`any`\> & `SdkStreamMixin` \| `undefined`\>

Defined in: [lib/s3.ts:149](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L149)

获取对象流，可通过流获取 buffer 或 text

#### Parameters

##### key

`string`

对象路径

##### bucket?

`string`

bucket 名

#### Returns

`Promise`\<`false` \| `Readable` & `SdkStreamMixin` \| `Blob` & `SdkStreamMixin` \| `ReadableStream`\<`any`\> & `SdkStreamMixin` \| `undefined`\>

***

### headObject()

> **headObject**(`key`, `bucket?`): `Promise`\<`false` \| `HeadObjectCommandOutput`\>

Defined in: [lib/s3.ts:211](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L211)

检测对象是否存在

#### Parameters

##### key

`string`

对象路径

##### bucket?

`string`

bucket 名

#### Returns

`Promise`\<`false` \| `HeadObjectCommandOutput`\>

***

### putObject()

> **putObject**(`key`, `content`, `length?`, `bucket?`): `Promise`\<`false` \| `CompleteMultipartUploadCommandOutput`\>

Defined in: [lib/s3.ts:103](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L103)

上传对象（可传流且也可无需设置 length） --

#### Parameters

##### key

`string`

对象路径

##### content

内容

`string` | `Buffer`\<`ArrayBufferLike`\> | `Readable`

##### length?

设置 contentLength，如果是流模式则需要设置此项，也可以设置为对象参数

`number` |

\{ `bucket?`: `string`; `disposition?`: `string`; `length?`: `number`; `type?`: `string`; \}

设置 contentLength，如果是流模式则需要设置此项，也可以设置为对象参数

###### bucket?

`string`

###### disposition?

`string`

###### length?

`number`

###### type?

`string`

content-type，如 application/javascript

##### bucket?

`string`

bucket 名

#### Returns

`Promise`\<`false` \| `CompleteMultipartUploadCommandOutput`\>

***

### setBucket()

> **setBucket**(`bucket`): `void`

Defined in: [lib/s3.ts:92](https://github.com/maiyunnet/kebab/blob/master/lib/s3.ts#L92)

修改预定义 bucket

#### Parameters

##### bucket

`string`

bucket 名

#### Returns

`void`
